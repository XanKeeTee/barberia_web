{% load static %}
<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Barbería Profesional{% endblock %}</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css"
    />

    <style>
      /* --- Estilos Personalizados "Premium" --- */
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        display: flex;
        flex-direction: column;
        min-height: 100vh; /* Para que el footer se quede abajo */
        background-color: #f8f9fa;
      }

      /* Navbar Oscuro con borde dorado */
      .navbar-custom {
        background-color: #1a1a1a;
        border-bottom: 2px solid #c59d5f;
      }

      /* Footer Oscuro */
      .footer-custom {
        background-color: #111;
        color: #aaa;
        padding: 30px 0;
        margin-top: auto;
      }

      /* Botones Dorados */
      .btn-gold {
        background-color: #c59d5f;
        color: white;
        border: none;
        transition: all 0.3s;
      }
      .btn-gold:hover {
        background-color: #a38045;
        color: white;
        transform: translateY(-2px);
      }

      /* Enlaces del menú al pasar el ratón */
      .nav-link:hover {
        color: #c59d5f !important;
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark navbar-custom sticky-top">
      <div class="container">
        <a class="navbar-brand text-uppercase fw-bold" href="{% url 'home' %}">
          <i class="bi bi-scissors text-warning"></i> Barbería
          <span class="text-warning">DOWN</span>
        </a>

        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto align-items-center">
            <li class="nav-item">
              <a class="nav-link" href="{% url 'home' %}">Inicio</a>
            </li>

            {% if user.is_authenticated %}
            <li class="nav-item">
              <a
                class="nav-link text-warning fw-bold"
                href="{% url 'mis_citas' %}"
                >Mis Citas</a
              >
            </li>

            {% if user.is_staff %}
            <li class="nav-item ms-lg-2">
              <a
                class="nav-link btn btn-dark btn-sm border border-secondary px-3 text-white"
                href="{% url 'agenda_profesional' %}"
              >
                <i class="bi bi-briefcase-fill"></i> Agenda Staff
              </a>
            </li>

            {% endif %} {% if user.is_staff %}
            <li class="nav-item ms-lg-2">
              <a
                class="nav-link btn btn-dark btn-sm border border-secondary px-3 text-white"
                href="{% url 'dashboard_staff' %}"
              >
                <i class="bi bi-bar-chart-fill"></i> Dashboard
              </a>
            </li>
            {% endif %}
            <li class="nav-item ms-lg-3">
              <a
                href="{% url 'mi_perfil' %}"
                class="nav-link btn btn-outline-light border border-secondary rounded px-3 py-1 text-light"
                title="Editar mi perfil"
              >
                <i class="bi bi-person-circle"></i> {{ user.first_name }}
              </a>
            </li>

            <li class="nav-item ms-2">
              <form action="{% url 'logout' %}" method="post" class="d-inline">
                {% csrf_token %}
                <button type="submit" class="btn btn-outline-danger btn-sm">
                  <i class="bi bi-box-arrow-right"></i> Salir
                </button>
              </form>
            </li>

            {% else %}
            <li class="nav-item ms-lg-3">
              <a class="nav-link" href="{% url 'login' %}">Iniciar Sesión</a>
            </li>
            <li class="nav-item">
              <a
                class="btn btn-gold btn-sm ms-2 px-3 rounded-pill"
                href="{% url 'registro' %}"
                >Registrarse</a
              >
            </li>
            {% endif %}
          </ul>
        </div>
      </div>
    </nav>

    <main class="flex-grow-1 position-relative">
      {% if messages %}
      <div
        class="container mt-3 position-absolute start-50 translate-middle-x"
        style="z-index: 1050; width: 80%; top: 20px"
      >
        {% for message in messages %}
        <div
          class="alert alert-{{ message.tags }} alert-dismissible fade show shadow-lg"
          role="alert"
        >
          {% if message.tags == 'success' %}<i
            class="bi bi-check-circle-fill me-2"
          ></i
          >{% endif %} {% if message.tags == 'error' %}<i
            class="bi bi-exclamation-triangle-fill me-2"
          ></i
          >{% endif %} {{ message }}
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="alert"
            aria-label="Close"
          ></button>
        </div>
        {% endfor %}
      </div>
      {% endif %} {% block content %}{% endblock %}
    </main>

    <footer class="footer-custom text-center">
      <div class="container">
        <div class="row text-start">
          <div class="col-md-4 mb-3">
            <h5 class="text-white text-uppercase fw-bold text-warning">
              Barbería DAW
            </h5>
            <p class="small text-secondary">
              La mejor experiencia de barbería tradicional adaptada a los nuevos
              tiempos. Corte clásico, estilo moderno.
            </p>
          </div>
          <div class="col-md-4 mb-3">
            <h5 class="text-white text-uppercase fw-bold">Navegación</h5>
            <ul class="list-unstyled">
              <li>
                <a
                  href="{% url 'home' %}"
                  class="text-decoration-none text-secondary hover-gold"
                  >Inicio</a
                >
              </li>
              <li>
                <a
                  href="{% url 'mis_citas' %}"
                  class="text-decoration-none text-secondary hover-gold"
                  >Reservar Cita</a
                >
              </li>
              {% if not user.is_authenticated %}
              <li>
                <a
                  href="{% url 'registro' %}"
                  class="text-decoration-none text-secondary hover-gold"
                  >Registrarse</a
                >
              </li>
              {% endif %}
            </ul>
          </div>
          <div class="col-md-4 mb-3">
            <h5 class="text-white text-uppercase fw-bold">Síguenos</h5>
            <div class="d-flex gap-3">
              <a href="#" class="text-white fs-5"
                ><i class="bi bi-instagram"></i
              ></a>
              <a href="#" class="text-white fs-5"
                ><i class="bi bi-facebook"></i
              ></a>
              <a href="#" class="text-white fs-5"
                ><i class="bi bi-twitter"></i
              ></a>
            </div>
          </div>
        </div>
        <hr class="border-secondary mt-4" />
        <p class="mb-0 small text-secondary">
          &copy; 2024 Barbería Proyecto DAW. Todos los derechos reservados.
        </p>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
